<app-usernavbar></app-usernavbar>
<br>
<br>
<h3 class="text-center">Search Flights</h3>
<hr>
<div class="container" style="background-color: rgb(129, 190, 250); border-radius: 5px;">
    <br>
    <form #searchform="ngForm" (ngSubmit)="onSubmit(Search)" >
        <div class="form-group" [class.has-error]="departureDate.invalid && departureDate.touched">
            <input type="date" min="{{today | date:'yyyy-MM-dd'}}"  class="form-control"  id="departureDate" [(ngModel)]="Search.departureDate" placeholder="departureDate" name="departureDate" required #departureDate="ngModel">
            <span class="help-block" *ngIf="departureDate.invalid && departureDate.touched">Departure Date is Required</span>
        </div>
        <div class="form-group row">
            <div class="col-md-6" [class.has-error]="from.invalid && from.touched">
                <input type="text" class=" form-control" id="from" minlength="5" placeholder="Enter Departure"  [(ngModel)]="Search.from" name="from"   #from="ngModel" required>
                <span class="help-block" *ngIf="from.invalid && from.touched">Departure is Required</span>
            </div>
            <div class="col-md-6" [class.has-error]="to.invalid && to.touched">
                <input type="text"  id="to"  [(ngModel)]="Search.to" name="to" #to="ngModel" class="form-control"  placeholder="Enter Destination" required>
                <span class="help-block" *ngIf="to.invalid && to.touched">Destination is Required</span>
            </div>
        </div>
        <br>
        <div class="form-group row">
            <div class="col-md-12 text-center">
                <button class="btn btn-primary" type="submit" [disabled]="searchform.invalid">Search</button>
            </div>
        </div>
    </form>
</div>
<br>
<br>
<!-- <div  style="background-color: rgb(129, 190, 250);" *ngIf="invalid">
    <div class="row">
        <br>
        <div class="col-md-1">
            <label>Flight Number</label>
        </div>
        <div class="col-md-1">
            <label>Airline Id</label>
        </div>
        <div class="col-md-1">
            <label>Airline Name</label>
        </div>
        <div class="col-md-1">
            <label>Departure</label>
        </div>
        <div class="col-md-1">
            <label>Destination</label>
        </div>
        <div class="col-md-1">
            <label>Start Date</label>
        </div>
        <div class="col-md-1">
            <label>End Date</label>
        </div>
        <div class="col-md-1">
            <label>Schedule Days</label>
        </div>
        <div class="col-md-1">
            <label>Ticket Cost</label>
        </div>
        <div class="col-md-1">
            <label>No of Business class seats</label>
        </div>
        <div class="col-md-1">
            <label>No of Economy class seats</label>
        </div>
        
        <div class="col-md-1">
            <label>Action</label>
        </div>
        <br>
    </div>
    <br>
    <br>
    <div class="row"  *ngFor="let flight of Flights">
        <br>
        <div class="col-md-1">
            {{flight.flightNumber}}
        </div>
        <div class="col-md-1">
            {{flight.airlineId}}
        </div>
        <div class="col-md-1">
            {{flight.flightName}}
        </div>
        <div class="col-md-1">
            {{flight.departure}}
        </div>
        <div class="col-md-1">
            {{flight.destination}}
        </div>
        <div class="col-md-1">
            {{flight.startDate.slice(0,10)}}
        </div>
        <div class="col-md-1">
            {{flight.endDate.slice(0,10)}}
        </div>
        <div class="col-md-1">
             <span *ngIf="flight.scheduleDays==0">Daily</span>
            <span *ngIf="flight.scheduleDays==1">Week days</span>
            <span *ngIf="flight.scheduleDays==2">Week Ends</span>
        </div>
        <div class="col-md-1">
            {{flight.ticketCost}}
        </div>
        <div class="col-md-1">
            {{flight.numberOfBusinessClassSeats}}
        </div>
        <div class="col-md-1">
            {{flight.numberOfEconomyClassSeats}}
        </div>
        
        <div class="col-md-1">
            <button class="btn btn-success" type="button" (click)="onBook(flight.flightNumber)">Book Flight</button>
        </div>
        <br>
    </div> 
</div> -->
<div class="container">
    <table class="table table-striped">
        <thead>
            <tr *ngIf="invalid==true">
                <th scope="col" class="text-center">Flight Number</th>
                <th scope="col" class="text-center">Airline Id</th>
                <th scope="col" class="text-center">Airline Name</th>
                <th scope="col" class="text-center">Departure</th>
                <th scope="col" class="text-center">Destination</th>
                <th scope="col" class="text-center">Schedule Days</th>
                <th scope="col" class="text-center">Ticket Cost</th>
                <th scope="col" class="text-center">Number of BC seats</th>
                <th scope="col" class="text-center">Number of EC seats</th>
                <th scope="col" class="text-center">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let flight of Flights" >
                <td class="text-center">{{flight.flightNumber}}</td>
                <td class="text-center">{{flight.airlineId}}</td>
                <td class="text-center">{{flight.flightName}}</td>
                <td class="text-center">{{flight.departure}}</td>
                <td class="text-center">{{flight.destination}}</td>
                <td class="text-center" *ngIf="flight.scheduleDays==0">Daily</td>
                <td  class="text-center" *ngIf="flight.scheduleDays==1">Week days</td>
                <td  class="text-center" *ngIf="flight.scheduleDays==2">Week Ends</td>
                <td class="text-center">{{flight.ticketCost}}</td>
                <td class="text-center">{{flight.numberOfBusinessClassSeats}}</td>
                <td class="text-center">{{flight.numberOfEconomyClassSeats}}</td>
                <td class="text-center"><a type="button" (click)="onBook(flight.flightNumber)">Book Flight</a></td>
            </tr>
        </tbody>
    </table>
</div>
